<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NetOptimizer Pro | Ultimate Customization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: 'var(--brand-color)',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --brand-color: #3b82f6;
            --bg-primary: #0a0a0b;
            --bg-secondary: #111113;
            --border-color: #1f1f23;
            --text-main: #f4f4f5;
            --text-dim: #71717a;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
        }

        .light {
            --bg-primary: #f1f5f9;
            --bg-secondary: #ffffff;
            --border-color: #e2e8f0;
            --text-main: #0f172a;
            --text-dim: #64748b;
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            color: var(--text-main);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        #app-content {
            transition: filter 0.2s ease;
            filter: brightness(100%);
        }

        .phone-container {
            width: 100%;
            max-width: 420px;
            height: 100%;
            background-color: var(--bg-primary);
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        .card-ultimate {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 18px;
            box-shadow: var(--card-shadow);
        }

        .tab-bar {
            height: 85px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: env(safe-area-inset-bottom);
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-dim);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: none;
            border: none;
            cursor: pointer;
        }
        .tab-item.active { color: var(--brand-color); transform: translateY(-2px); }

        .content-scroll {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 40px;
            scrollbar-width: none;
        }
        .content-scroll::-webkit-scrollbar { display: none; }

        .tab-panel {
            display: none;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .tab-panel.active { display: block; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .color-dot {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: transform 0.2s;
        }
        .color-dot:active { transform: scale(0.9); }
        .color-dot.active { border-color: white; box-shadow: 0 0 10px rgba(0,0,0,0.2); }

        .brightness-control {
            position: relative;
            height: 52px;
            background: var(--border-color);
            border-radius: 16px;
            display: flex;
            align-items: center;
            padding: 0 16px;
            overflow: hidden;
        }

        .brightness-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: var(--brand-color);
            width: 100%;
            z-index: 1;
            transition: width 0.1s ease;
            opacity: 0.8;
        }

        .brightness-input {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0; cursor: pointer; z-index: 3;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }
        
        select {
            color: var(--text-main);
            background-color: var(--bg-secondary);
        }
    </style>
</head>
<body class="dark">

    <div class="phone-container shadow-2xl">
        <div id="app-content" class="flex flex-col h-full">
            
            <!-- Header -->
            <header class="h-20 flex items-center justify-between px-6 shrink-0 z-50">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full border-2 border-brand overflow-hidden shadow-lg shadow-brand/20">
                        <img src="https://i.pinimg.com/736x/1b/ac/96/1bac96cd70e67c3c67ffb25cd4f88da1.jpg" alt="User" class="w-full h-full object-cover">
                    </div>
                    <div class="flex flex-col">
                        <h1 class="text-md font-extrabold tracking-tight">
                            <span class="text-brand">NET</span>OPTIMIZER
                        </h1>
                        <span id="real-device-name" class="text-[9px] font-bold uppercase tracking-widest text-zinc-500">
                            ОПРЕДЕЛЕНИЕ...
                        </span>
                    </div>
                </div>
                <div class="flex gap-2">
                    <button onclick="toggleTheme()" class="w-10 h-10 bg-zinc-800/20 dark:bg-zinc-800/40 rounded-full flex items-center justify-center transition-all border border-transparent hover:border-brand/30">
                        <i id="theme-icon" data-lucide="moon" class="w-5 h-5"></i>
                    </button>
                </div>
            </header>

            <main class="flex-1 relative overflow-hidden">
                
                <!-- Панель: Обзор -->
                <div id="panel-dashboard" class="tab-panel active content-scroll h-full">
                    <div class="space-y-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="card-ultimate border-l-4 border-l-brand">
                                <p class="text-[10px] font-bold text-zinc-500 uppercase" data-i18n="refresh_rate">Частота экрана</p>
                                <div class="flex items-baseline gap-1 mt-1">
                                    <span id="hz-val" class="text-3xl font-black mono tracking-tighter text-brand">---</span>
                                    <span class="text-xs font-bold text-zinc-400">Hz</span>
                                </div>
                            </div>
                            <div class="card-ultimate">
                                <p class="text-[10px] font-bold text-zinc-500 uppercase" data-i18n="battery">Батарея</p>
                                <div class="flex items-baseline gap-1 mt-1">
                                    <span id="bat-val" class="text-3xl font-black mono tracking-tighter text-emerald-500">---</span>
                                    <span class="text-xs font-bold text-zinc-400">%</span>
                                </div>
                            </div>
                        </div>

                        <div class="card-ultimate space-y-3">
                            <div class="flex justify-between items-center">
                                <p class="text-[10px] font-bold text-zinc-500 uppercase" data-i18n="brightness">Яркость дисплея</p>
                                <span id="bright-percent" class="text-xs font-bold text-brand">100%</span>
                            </div>
                            <div class="brightness-control">
                                <div id="bright-fill" class="brightness-fill"></div>
                                <div class="relative z-10 w-full flex justify-between px-1 pointer-events-none">
                                    <i data-lucide="sun" class="w-4 h-4 text-white"></i>
                                    <i data-lucide="sun" class="w-5 h-5 text-white/40"></i>
                                </div>
                                <input type="range" id="bright-slider" min="10" max="100" value="100" class="brightness-input" oninput="updateBrightness(this.value)">
                            </div>
                        </div>
                        
                        <div class="card-ultimate">
                            <p class="text-[10px] font-bold text-zinc-500 uppercase mb-2" data-i18n="hardware">Железо</p>
                            <div class="space-y-2">
                                <div class="flex justify-between text-xs">
                                    <span class="text-zinc-500" data-i18n="cpu_cores">Ядра CPU:</span>
                                    <span id="cpu-cores" class="font-bold">NULL</span>
                                </div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-zinc-500" data-i18n="ram_estimate">RAM (Оценка):</span>
                                    <span id="ram-val" class="font-bold">NULL</span>
                                </div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-zinc-500" data-i18n="touch_points">Точки касания:</span>
                                    <span id="touch-val" class="font-bold">NULL</span>
                                </div>
                            </div>
                        </div>

                        <div class="card-ultimate h-36">
                            <canvas id="miniChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Панель: Кастомизация -->
                <div id="panel-custom" class="tab-panel content-scroll h-full">
                    <div class="space-y-6">
                        <h2 class="text-2xl font-black" data-i18n="custom_title">Кастомизация</h2>
                        
                        <div class="card-ultimate space-y-4">
                            <p class="text-[10px] font-bold text-zinc-500 uppercase" data-i18n="accent_color">Акцентный цвет</p>
                            <div class="flex justify-between">
                                <div onclick="setAccent('#3b82f6')" class="color-dot bg-blue-500 active"></div>
                                <div onclick="setAccent('#ef4444')" class="color-dot bg-red-500"></div>
                                <div onclick="setAccent('#10b981')" class="color-dot bg-emerald-500"></div>
                                <div onclick="setAccent('#f59e0b')" class="color-dot bg-amber-500"></div>
                                <div onclick="setAccent('#a855f7')" class="color-dot bg-purple-500"></div>
                                <div onclick="setAccent('#ec4899')" class="color-dot bg-pink-500"></div>
                            </div>
                        </div>

                        <div class="card-ultimate space-y-4">
                            <p class="text-[10px] font-bold text-zinc-500 uppercase" data-i18n="language">Язык приложения</p>
                            <select onchange="setLanguage(this.value)" class="w-full bg-transparent border border-zinc-800 rounded-xl p-3 text-sm font-bold focus:outline-none">
                                <option value="ru">Русский</option>
                                <option value="en">English</option>
                                <option value="ua">Українська</option>
                            </select>
                        </div>

                        <div class="card-ultimate space-y-4">
                            <p class="text-[10px] font-bold text-zinc-500 uppercase" data-i18n="configs">Конфигурации</p>
                            <div class="grid grid-cols-2 gap-3">
                                <button onclick="saveConfig()" class="bg-zinc-800/50 p-3 rounded-xl text-[10px] font-bold uppercase flex flex-col items-center gap-2 text-zinc-300">
                                    <i data-lucide="download" class="w-4 h-4"></i> Сохранить
                                </button>
                                <label class="bg-zinc-800/50 p-3 rounded-xl text-[10px] font-bold uppercase flex flex-col items-center gap-2 cursor-pointer text-zinc-300">
                                    <i data-lucide="upload" class="w-4 h-4"></i> Загрузить
                                    <input type="file" class="hidden" onchange="loadConfig(this)">
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Панель: Логи -->
                <div id="panel-security" class="tab-panel content-scroll h-full">
                    <div class="space-y-4">
                        <h2 class="text-2xl font-black" data-i18n="logs_title">Логи Системы</h2>
                        <div id="real-logs" class="card-ultimate h-[450px] bg-black/30 dark:bg-black/50 border-zinc-800 mono p-4 overflow-hidden flex flex-col-reverse text-[10px]">
                        </div>
                    </div>
                </div>

                <!-- Панель: Инфо -->
                <div id="panel-settings" class="tab-panel content-scroll h-full">
                    <div class="space-y-6">
                        <h2 class="text-2xl font-black" data-i18n="info_title">Свойства</h2>
                        <div class="card-ultimate space-y-4">
                            <div class="flex justify-between text-xs items-center">
                                <span class="text-zinc-500 uppercase font-bold" data-i18n="os_ver">Версия ОС:</span>
                                <span id="os-val" class="px-2 py-1 bg-brand/10 text-brand rounded font-bold">NULL</span>
                            </div>
                            <div class="flex justify-between text-xs items-center">
                                <span class="text-zinc-500 uppercase font-bold" data-i18n="gpu_renderer">GPU:</span>
                                <span id="gpu-val" class="font-mono font-bold text-right truncate max-w-[150px]">Анализ...</span>
                            </div>
                            <div class="flex justify-between text-xs items-center">
                                <span class="text-zinc-500 uppercase font-bold" data-i18n="connection">Сеть:</span>
                                <span id="net-val" class="font-bold">NULL</span>
                            </div>
                            <div class="flex justify-between text-xs items-center">
                                <span class="text-zinc-500 uppercase font-bold" data-i18n="max_touch">Мультитач:</span>
                                <span id="multitouch-val" class="font-bold">NULL</span>
                            </div>
                        </div>
                        
                        <div class="card-ultimate">
                             <p class="text-[10px] font-bold text-zinc-500 uppercase mb-3">User Agent</p>
                             <div class="text-[9px] break-all opacity-50 mono" id="ua-string"></div>
                        </div>
                    </div>
                </div>
            </main>

            <nav class="tab-bar">
                <button onclick="changeTab('dashboard', this)" class="tab-item active"><i data-lucide="layout-grid" class="w-6 h-6"></i><span class="text-[9px] font-bold mt-1 uppercase" data-i18n="tab_home">Обзор</span></button>
                <button onclick="changeTab('custom', this)" class="tab-item"><i data-lucide="palette" class="w-6 h-6"></i><span class="text-[9px] font-bold mt-1 uppercase" data-i18n="tab_custom">Стиль</span></button>
                <button onclick="changeTab('security', this)" class="tab-item"><i data-lucide="terminal" class="w-6 h-6"></i><span class="text-[9px] font-bold mt-1 uppercase" data-i18n="tab_logs">Логи</span></button>
                <button onclick="changeTab('settings', this)" class="tab-item"><i data-lucide="info" class="w-6 h-6"></i><span class="text-[9px] font-bold mt-1 uppercase" data-i18n="tab_info">Инфо</span></button>
            </nav>
        </div>
    </div>

    <script>
        const translations = {
            ru: {
                refresh_rate: "Частота экрана", battery: "Батарея", brightness: "Яркость дисплея", hardware: "Железо",
                cpu_cores: "Ядра CPU:", ram_estimate: "RAM (Оценка):", touch_points: "Точки касания:",
                custom_title: "Кастомизация", accent_color: "Акцентный цвет", language: "Язык приложения",
                configs: "Конфигурации", logs_title: "Логи Системы", info_title: "Свойства",
                os_ver: "Версия ОС:", gpu_renderer: "GPU:", connection: "Сеть:", max_touch: "Мультитач:",
                tab_home: "Обзор", tab_custom: "Стиль", tab_logs: "Логи", tab_info: "Инфо"
            },
            en: {
                refresh_rate: "Refresh Rate", battery: "Battery", brightness: "Brightness", hardware: "Hardware",
                cpu_cores: "CPU Cores:", ram_estimate: "RAM Estimate:", touch_points: "Touch Points:",
                custom_title: "Customization", accent_color: "Accent Color", language: "App Language",
                configs: "Configurations", logs_title: "System Logs", info_title: "Device Properties",
                os_ver: "OS Version:", gpu_renderer: "GPU:", connection: "Network:", max_touch: "Multitouch:",
                tab_home: "Home", tab_custom: "Style", tab_logs: "Logs", tab_info: "Info"
            },
            ua: {
                refresh_rate: "Частота екрану", battery: "Батарея", brightness: "Яскравість", hardware: "Залізо",
                cpu_cores: "Ядра CPU:", ram_estimate: "RAM (Оцінка):", touch_points: "Точки дотику:",
                custom_title: "Кастомізація", accent_color: "Акцентний колір", language: "Мова",
                configs: "Конфігурації", logs_title: "Логи Системи", info_title: "Властивості",
                os_ver: "Версія ОС:", gpu_renderer: "GPU:", connection: "Мережа:", max_touch: "Мультитач:",
                tab_home: "Огляд", tab_custom: "Стиль", tab_logs: "Логи", tab_info: "Інфо"
            }
        };

        let currentLang = 'ru';

        function setLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) el.innerText = translations[lang][key];
            });
            addLog(`Language changed to ${lang}`, 'success');
        }

        function setAccent(color) {
            document.documentElement.style.setProperty('--brand-color', color);
            document.querySelectorAll('.color-dot').forEach(d => d.classList.remove('active'));
            if(event && event.target) event.target.classList.add('active');
            addLog(`Theme color updated to ${color}`, 'success');
        }

        function updateBrightness(val) {
            const content = document.getElementById('app-content');
            const fill = document.getElementById('bright-fill');
            const percentLabel = document.getElementById('bright-percent');
            if(!content || !fill || !percentLabel) return;
            content.style.filter = `brightness(${val}%)`;
            fill.style.width = `${val}%`;
            percentLabel.innerText = val + "%";
        }

        async function detectDevice() {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            const ua = navigator.userAgent;
            document.getElementById('ua-string').innerText = ua;

            document.getElementById('cpu-cores').innerText = navigator.hardwareConcurrency || "NULL";
            
            if (navigator.deviceMemory) {
                document.getElementById('ram-val').innerText = "~" + navigator.deviceMemory + " GB";
            } else {
                document.getElementById('ram-val').innerText = "NULL";
            }

            document.getElementById('touch-val').innerText = navigator.maxTouchPoints || "0";
            document.getElementById('multitouch-val').innerText = (navigator.maxTouchPoints > 1) ? "Да (" + navigator.maxTouchPoints + ")" : "Нет";

            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                document.getElementById('gpu-val').innerText = renderer || "NULL";
            } catch(e) { document.getElementById('gpu-val').innerText = "NULL"; }

            if (navigator.connection) {
                document.getElementById('net-val').innerText = navigator.connection.effectiveType.toUpperCase();
            } else {
                document.getElementById('net-val').innerText = "NULL";
            }

            let model = isMobile ? "Mobile Device" : "PC / Desktop";
            if (/Android/i.test(ua)) {
                const match = ua.match(/Android\s([^\s;]+);\s([^;]+)/);
                if (match) model = match[2];
            } else if (/iPhone|iPad/i.test(ua)) {
                model = /iPhone/.test(ua) ? "Apple iPhone" : "Apple iPad";
            }
            document.getElementById('real-device-name').innerText = model;
            document.getElementById('os-val').innerText = isMobile ? (ua.match(/(Android|OS)\s([0-9_.]+)/)?.[0] || "Mobile") : "Desktop OS";

            addLog(`Device detected: ${model}`, 'success');
        }

        function measureHz() {
            let lastTime = performance.now();
            let frames = 0;
            function check() {
                frames++;
                const now = performance.now();
                if (now > lastTime + 1000) {
                    const hzEl = document.getElementById('hz-val');
                    if(hzEl) hzEl.innerText = Math.round(frames);
                    frames = 0;
                    lastTime = now;
                }
                requestAnimationFrame(check);
            }
            requestAnimationFrame(check);
        }

        function initBattery() {
            if (navigator.getBattery) {
                navigator.getBattery().then(battery => {
                    const update = () => {
                        const level = Math.round(battery.level * 100);
                        const batEl = document.getElementById('bat-val');
                        if(batEl) batEl.innerText = level;
                    };
                    battery.addEventListener('levelchange', update);
                    update();
                });
            } else {
                document.getElementById('bat-val').innerText = "N/A";
            }
        }

        function addLog(msg, type = 'info') {
            const container = document.getElementById('real-logs');
            if(!container) return;
            const div = document.createElement('div');
            div.className = `log-line py-1 border-l-2 pl-2 mb-1 transition-all ${type === 'success' ? 'text-emerald-500 border-emerald-500' : 'text-zinc-400 border-zinc-700'}`;
            div.innerText = `[${new Date().toLocaleTimeString()}] ${msg}`;
            container.prepend(div);
            if(container.children.length > 30) container.lastChild.remove();
        }

        function changeTab(tab, btn) {
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(b => b.classList.remove('active'));
            const panel = document.getElementById(`panel-${tab}`);
            if(panel) panel.classList.add('active');
            if(btn) btn.classList.add('active');
            lucide.createIcons();
        }

        function toggleTheme() {
            const isDark = document.body.classList.toggle('dark');
            document.body.classList.toggle('light');
            document.getElementById('theme-icon').setAttribute('data-lucide', isDark ? 'moon' : 'sun');
            lucide.createIcons();
            addLog(`Theme switched to ${isDark ? 'Dark' : 'Light'}`, 'info');
        }

        function saveConfig() {
            const config = {
                lang: currentLang,
                accent: getComputedStyle(document.documentElement).getPropertyValue('--brand-color').trim(),
                theme: document.body.classList.contains('dark') ? 'dark' : 'light'
            };
            const blob = new Blob([JSON.stringify(config)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'optimizer_config.json';
            a.click();
            addLog('Config exported successfully', 'success');
        }

        function loadConfig(input) {
            const file = input.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const cfg = JSON.parse(e.target.result);
                    if(cfg.lang) {
                        setLanguage(cfg.lang);
                        document.querySelector('select').value = cfg.lang;
                    }
                    if(cfg.accent) setAccent(cfg.accent);
                    addLog('Config loaded successfully', 'success');
                } catch(err) { addLog('Invalid config file', 'warn'); }
            };
            reader.readAsText(file);
        }

        function initChart() {
            const ctx = document.getElementById('miniChart');
            if(!ctx) return;
            const chart = new Chart(ctx, {
                type: 'line',
                data: { 
                    labels: Array(30).fill(''), 
                    datasets: [{ 
                        data: Array(30).fill(0), 
                        borderColor: '#3b82f6', 
                        borderWidth: 2, 
                        pointRadius: 0, 
                        tension: 0.4, 
                        fill: true, 
                        backgroundColor: 'rgba(59, 130, 246, 0.05)' 
                    }] 
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    plugins: { legend: { display: false } }, 
                    scales: { x: { display: false }, y: { display: false } }, 
                    animation: { duration: 0 } 
                }
            });
            setInterval(() => {
                chart.data.datasets[0].data.push(Math.random() * 100);
                chart.data.datasets[0].data.shift();
                chart.data.datasets[0].borderColor = getComputedStyle(document.documentElement).getPropertyValue('--brand-color').trim();
                chart.update();
            }, 800);
        }

        window.onload = () => {
            detectDevice();
            measureHz();
            initBattery();
            initChart();
            lucide.createIcons();
            setLanguage('ru');
        };
    </script>
</body>
</html>
